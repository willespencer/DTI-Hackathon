<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>CU Apartments</title>
    <link rel="stylesheet" href="styles/homePageStyles.css" />
    <link rel="stylesheet" href="styles/reviewStyles.css" />
    <link rel="stylesheet" href="styles/rating.css" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <nav class="navbar navbar-light bg-light">
      <a class="navbar-brand" href="">CU Apartments</a>
      <!-- <a href="components/reviewsComponent.html"> -->
      <button
        class="navbar-button btn my-2 my-sm-0"
        id="button"
        data-target="#exampleModal"
        data-toggle="modal"
      >
        Write Review
      </button>
      <!-- Button trigger modal -->
    </nav>
    <div class="bg-modal" id="bg-modal">
      <div class="modal-content">
        <div class="close" id="close">+</div>
        <!-- <div style="text-align: center"></div> -->
            <h4 style=" color:#D01D38;"> Leave a review</h4>
            <h6>Search property name</h6>
            
            
              <div class="input-group mb-3">
                <select class="custom-select" id="inputGroupSelect02">
                  <option selected>Choose unit type</option>
                  <option value="1">Studio</option>
                  <option value="2">1 BD</option>
                  <option value="3">2 BD</option>
                  <option value="3">3 BD</option>
                  <option value="3">4 BD</option>
                </select>
              </div>
              <h6 > Overall </h6>
              <div class="rating"> <input type="radio" name="rating" value="5" id="5"><label for="5">☆</label> <input type="radio" name="rating" value="4" id="4"><label for="4">☆</label> <input type="radio" name="rating" value="3" id="3"><label for="3">☆</label> <input type="radio" name="rating" value="2" id="2"><label for="2">☆</label> <input type="radio" name="rating" value="1" id="1"><label for="1">☆</label>
              </div>
              <h6> Landlord </h6>
              <div class="rating"> <input type="radio" name="rating" value="5" id="5"><label for="5">☆</label> <input type="radio" name="rating" value="4" id="4"><label for="4">☆</label> <input type="radio" name="rating" value="3" id="3"><label for="3">☆</label> <input type="radio" name="rating" value="2" id="2"><label for="2">☆</label> <input type="radio" name="rating" value="1" id="1"><label for="1">☆</label>
              </div>
              
              
                <div class="dropdown">
                  <h6 style = "display: inline-block; font-size: 15px;" >
                    amenities 
                  </h6>
                  <button class="btn btn-secondary dropdown-toggle" style = "margin: 0.5em" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    rate
                  </button>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="#">sadf</a>
                    <a class="dropdown-item" href="#">sadf</a>
                    <a class="dropdown-item" href="#">asdf</a>
                  </div>
                  <h6 style = "display: inline-block; font-size: 15px" >
                    location
                  </h6>
                  <button class="btn btn-secondary dropdown-toggle" style = "margin: 0.5em" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    rate
                  </button>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="#">test</a>
                    <a class="dropdown-item" href="#">Another action</a>
                    <a class="dropdown-item" href="#">Something else here</a>
                  </div>
                  <h6 style = "display: inline-block; font-size: 15px;" >
                    laundry
                  </h6>
                  <button class="btn btn-secondary dropdown-toggle" style = "margin: 0.5em" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    rate
                  </button>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="#">test</a>
                    <a class="dropdown-item" href="#">Another action</a>
                    <a class="dropdown-item" href="#">Something else here</a>
                  </div>
                  <h6 style = "display: inline-block; font-size: 15px;" >
                    wifi
                  </h6>
                  <button class="btn btn-secondary dropdown-toggle" style = "margin: 0.5em" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    rate
                  </button>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="#">test</a>
                    <a class="dropdown-item" href="#">Another action</a>
                    <a class="dropdown-item" href="#">Something else here</a>
                  </div>
                  
                </div>

            
                <div class = "textareabox">
              <textarea class="textarea" style="align-content:left" rows="5" cols="0" placeholder=" Add specific feedback here"></textarea>
            </div>
              
            <div class = "submitbutton">
              <a href=""  style = "align-content: left" class="btn btn-primary" style = "width:200px"> Submit </a>
            </div>
         
           
          
        </div>
      </div>
    </div>

    <div class="content">
      <div class="box">
        <span class="boxTitle">Search for reviews of off-campus housing and share feedback </span>
        <!-- TODO turn div back into form after search "works" -->
        <!-- <div class="form-inline my-2 my-lg-0">
          <input
            class="form-control mr-sm-3"
            type="search"
            placeholder="🔍  Search"
            aria-label="Search"
            id="form-control"
          />
          <a href="components/productPage.html">
            <button class="btn btn-outline-success my-2 my-sm-0">Go!</button>
          </a>
        </div> -->

        <!-- <div class="collapse navbar-collapse" id="navbarSupportedContent"> -->
          <div class="form-inline my-2 my-lg-0">
            <input
              class="form-control mr-sm-3"
              type="search"
              placeholder="🔍  Search by any location e.g. '301 College Ave'"
              aria-label="Search"
              id="form-control"
            />
            <a href="components/productPage.html">
              <button class="searchButton btn my-2 my-sm-0">Search</button>
            </a>
          </div>
        <!-- </div> -->
      </div>
    </div>

    <div class="bottom">
      <div class="apartments">
      </div>
    </div>
    <script src="./scripts/main.js"></script>
    <script src="./data/apartments.js"></script>
    <script>
      // const apartments refers to the json obj in the js file
      apartments.forEach( apartment => {
        // create div for each apartment

        const apartment_container_div = document.createElement('div');
        apartment_container_div.className = 'apartment-container';

        apartment_container_div.innerHTML =
          '<img src="images/' + apartment.image + '.jpg" class="image" alt="Apartment" />' +
          '<div class="location">' +
            '<img class="pin" src="images/mapPin.svg" />' +
            '<a href="components/productPage.html">' + apartment.name + '</a>' +
          '</div>' + 
          '<div class="otherInfo">' + 
            '<span class="landlord">' + apartment.landlord + '</span>' + 
            '<span class="numReviews">Reviews: ' + apartment.reviews.length + '</span>' + 
          '</div>';

        // create tags for each apartment div
        const attributes_div = document.createElement('div');
        attributes_div.className = 'attributes';

        let attributes_div_innerHTML = '';
        Object.entries(apartment.tags_list).forEach( t => {
          const tag = t[0];
          const rating = t[1];

          let color = 'red'; // rating is 1

          if (rating == 2) {
            color = 'yellow';
          }
          else {
            color = 'green';
          }

          attributes_div_innerHTML +=  '<span class="attribute attribute--' + color + '">' + tag.charAt(0).toUpperCase() + tag.slice(1) + '</span>'
        });
        attributes_div.innerHTML = attributes_div_innerHTML;
        // append attributes div to apartment-container div
        apartment_container_div.appendChild(attributes_div);

        // append apartment-container div to apartments div
        document.getElementsByClassName('apartments')[0].appendChild(apartment_container_div);
      });

    </script>
  </body>
</html>